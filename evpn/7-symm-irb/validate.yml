ospf:
  description: Check OSPF session between S1 and S2
  fail: There is no OSPF session between S1 and S2
  devices: [ frr, eos ]
  nodes: [ s1 ]
  plugin: ospf_neighbor(nodes.s2.ospf.router_id)
  stop_on_error: True

bgp:
  description: Check IBGP session between S1 and S2
  fail: There is no IBGP session between S1 and S2
  devices: [ frr, eos ]
  nodes: [ s1 ]
  plugin: bgp_neighbor(node.bgp.neighbors,'s2')
  stop_on_error: True

ping_vlan:
  description: Check intra-VLAN connectivity
  pass: Red hosts can communicate
  fail: Intra-VLAN (MAC-VRF) forwarding is broken
  nodes: [ hr1 ]
  plugin: ping('hr2')

ping_irb:
  description: Check inter-VLAN connectivity
  pass: All other hosts can reach the green host
  fail: Inter-segment (IP-VRF) forwarding is broken
  nodes: [ hr1, hr2, hb ]
  plugin: ping('hg')
